<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Vende tu propiedad - Propiedades Altura</title>
  <meta name="description" content="Tasación gratuita de propiedades en Guarne, Rionegro y Oriente Antioqueño">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="sell.css">
</head>
<body>
  <div class="page">

    <!-- ========== PERFECT HEADER (same as homepage) ========== -->
    <header class="site-header" role="banner">
      <div class="wrap header-inner">
        <a class="logo" href="index.html" aria-label="Propiedades Altura — inicio">
          <svg class="logo-icon" viewBox="0 0 64 64" aria-hidden="true" focusable="false">
            <path d="M4 56 L32 8 L60 56 Z" fill="currentColor"/>
          </svg>
          <span class="brand">Propiedades Altura</span>
        </a>

        <nav class="header-nav">
          <!-- "Vender tu propiedad" button intentionally removed -->
          
          <div class="lang" id="lang-switch" aria-label="Language switcher">
            <button class="lang-btn" data-lang="es" aria-pressed="false">ES</button>
            <button class="lang-btn" data-lang="en" aria-pressed="true">EN</button>
          </div>

          <a class="cta mobile-main-cta" href="index.html#properties">
            Ver Propiedades
          </a>
        </nav>
      </div>
      <p class="tagline" data-es="ORIENTE ANTIOQUEÑO" data-en="EASTERN ANTIOQUIA">EASTERN ANTIOQUIA</p>
    </header>

    <!-- ========== MAIN CONTENT ========== -->
    <main style="max-width:960px; margin:4rem auto 6rem; padding:0 1rem;">
      <h1 data-es="Vende tu propiedad" data-en="Sell Your Property">Sell Your Property</h1>
      <p class="lead" style="font-size:1.1rem; color:#555; max-width:720px;">
        <span data-es="Ingresa los datos y fotos de tu propiedad para que la valoremos rápidamente."
              data-en="Enter your property details and photos so we can evaluate it quickly.">
          Enter your property details and photos so we can evaluate it quickly.
        </span>
      </p>

      <form 
  class="form-grid" 
  name="sell" 
  method="POST" 
  data-netlify="true" 
  netlify-honeypot="bot-field"
  data-netlify-action="/.netlify/functions/submit-lead"
  enctype="multipart/form-data">


  <div>
    <label data-es="Nombre completo *" data-en="Full Name *">Full Name *</label>
    <input type="text" name="name" required placeholder="John Doe">
  </div>
  
        <div>
          <label data-es="Nombre completo *" data-en="Full Name *">Full Name *</label>
          <input type="text" name="name" required placeholder="John Doe">
        </div>

        <div>
          <label data-es="Email *" data-en="Email *">Email *</label>
          <input type="email" name="_replyto" required placeholder="john@example.com">
        </div>

        <div>
          <label data-es="Teléfono / WhatsApp *" data-en="Phone / WhatsApp *">Phone / WhatsApp *</label>
          <input type="tel" name="phone" required placeholder="+57 300 123 4567">
        </div>

        <div>
          <label data-es="Ciudad / Municipio" data-en="City / Town">City / Town</label>
          <input type="text" name="city" placeholder="Guarne, Rionegro, El Retiro...">
        </div>

        <!-- Interactive Map -->
        <div class="full-width">
          <label data-es="Haz clic en el mapa para seleccionar la ubicación exacta"
                 data-en="Click on the map to select the exact location">
            Click on the map to select the exact location
          </label>
          <div id="map"></div>
          <input type="hidden" name="latitude"  id="lat">
          <input type="hidden" name="longitude" id="lng">
          <input type="hidden" name="google_maps_link" id="maps-link">

          <div style="margin-top:0.8rem;">
            <small id="coords" style="color:#1d4ed8; font-weight:600;"></small><br>
            <a id="open-map" href="#" target="_blank" style="display:none; color:#1d4ed8; font-size:0.9rem; text-decoration:underline;">
              → Open exact location in Google Maps
            </a>
          </div>
        </div>

        <div>
          <label data-es="Tipo de propiedad" data-en="Property Type">Property Type</label>
          <select name="property_type">
            <option>House</option>
            <option>Apartment</option>
            <option>Country House / Finca</option>
            <option>Lot / Land</option>
            <option>Commercial Premises</option>
            <option>Warehouse</option>
          </select>
        </div>

        <div>
          <label data-es="Área (m²)" data-en="Area (m²)">Area (m²)</label>
          <input type="number" name="area_m2" placeholder="250">
        </div>

        <div>
          <label data-es="Tamaño del lote (m²)" data-en="Lot Size (m²)">Lot Size (m²)</label>
          <input type="number" name="lot_size" placeholder="1000">
        </div>

        <div>
          <label data-es="Precio de venta esperado" data-en="Expected Asking Price">Expected Asking Price</label>
          <input type="number" name="asking_price" placeholder="500000000" step="100000">
        </div>

        <!-- Photo Upload -->
        <div class="full-width">
          <label data-es="Sube fotos de tu propiedad (máximo 5)"
                 data-en="Upload photos of your property (up to 5)">
            Upload photos of your property (up to 5)
          </label>
          <div class="photo-upload">
            <input type="file" name="photos" id="photos" accept="image/*" multiple style="display:none;">
            <p style="margin:0; color:#666;">
              <strong>Click here or drag photos</strong><br>
              <small>Maximum 5 photos (JPG, PNG)</small>
            </p>
            <div class="photo-preview" id="preview"></div>
          </div>
        </div>

        <div class="full-width">
          <label data-es="Mensaje adicional" data-en="Additional message">Additional message</label>
          <textarea name="message" placeholder="Expected price, urgency, special conditions..."></textarea>
        </div>

        <div class="full-width">
          <button type="submit" data-es="Enviar Información" data-en="Send Information">
            Send Information
          </button>
        </div>
      </form>

      <div class="success" id="success">
        <span data-es="¡Gracias! Hemos recibido tu información y fotos."
              data-en="Thank you! We received your information and photos.">
          Thank you! We received your information and photos.
        </span>
      </div>
    </main>
  </div>

  <!-- Scripts -->
  <script src="app.js" defer></script>

  <!-- Language + Form + Photo + Map Logic -->
  <script>
    // Language toggle
    document.querySelectorAll(".lang-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        const lang = btn.dataset.lang;
        document.documentElement.lang = lang;
        document.querySelectorAll("[data-es],[data-en]").forEach(el => {
          el.textContent = lang === "es" ? el.dataset.es : el.dataset.en;
        });
        document.querySelectorAll(".lang-btn").forEach(b => 
          b.setAttribute("aria-pressed", b.dataset.lang === lang)
        );
      });
    });

    // Photo preview
    const input = document.getElementById('photos');
    const preview = document.getElementById('preview');
    const uploadBox = document.querySelector('.photo-upload');
    uploadBox.addEventListener('click', () => input.click());
    ['dragover','dragenter'].forEach(e => uploadBox.addEventListener(e, ev => {ev.preventDefault(); uploadBox.style.borderColor='#1d4ed8';}));
    ['dragleave','drop'].forEach(e => uploadBox.addEventListener(e, ev => {ev.preventDefault(); uploadBox.style.borderColor='#ccc';}));
    uploadBox.addEventListener('drop', e => { if(e.dataTransfer.files) input.files = e.dataTransfer.files; handleFiles(e.dataTransfer.files); });
    input.addEventListener('change', () => handleFiles(input.files));

    function handleFiles(files) {
      preview.innerHTML = '';
      for (let i = 0; i < Math.min(files.length, 5); i++) {
        if (files[i].type.startsWith('image/')) {
          const img = document.createElement('img');
          img.src = URL.createObjectURL(files[i]);
          preview.appendChild(img);
        }
      }
      if (files.length > 5) preview.innerHTML += `<small style="color:red;">Only the first 5 photos will be sent.</small>`;
    }

    // Success message
    document.querySelector('form').addEventListener('submit', () => {
      setTimeout(() => {
        document.getElementById('success').classList.add('show');
        document.getElementById('success').scrollIntoView({behavior:'smooth'});
      }, 900);
    });
  </script>

  <!-- Map -->
  <script>
    window.initSellMap = function() {
      const map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: 6.1935, lng: -75.3832 },
        zoom: 10,
      });
      let marker = null;
      map.addListener("click", e => {
        const lat = e.latLng.lat();
        const lng = e.latLng.lng();
        if (marker) marker.setPosition(e.latLng);
        else marker = new google.maps.Marker({ position: e.latLng, map });
        document.getElementById("lat").value = lat.toFixed(6);
        document.getElementById("lng").value = lng.toFixed(6);
        const url = `https://www.google.com/maps?q=${lat},${lng}&z=18`;
        document.getElementById("maps-link").value = url;
        document.getElementById("coords").textContent = `Location saved: ${lat.toFixed(5)}, ${lng.toFixed(5)}`;
        const link = document.getElementById("open-map");
        link.href = url;
        link.style.display = "inline";
      });
    };
  </script>
  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCoIGK7pUUxiu0nJSJ79ckIcayGm5O31Zo&callback=initSellMap">
  </script>
</body>
</html>
