<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Vende tu propiedad - Propiedades Altura</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="sell.css">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

  <!-- Wompi -->
  <script src="https://checkout.wompi.co/widget.js"></script>

  <style>
    .choose-buttons{display:flex;flex-wrap:wrap;gap:3.5rem;justify-content:center;margin:6rem 0;}
    .exclusive-btn{background:#000;color:#FFD700;padding:3.2rem 4.5rem;border-radius:28px;font-family:'Playfair Display',serif;font-weight:700;font-size:2.4rem;text-decoration:none;border:7px solid #FFD700;box-shadow:0 25px 50px rgba(0,0,0,0.5);transition:transform .3s;}
    .exclusive-btn:hover{transform:translateY(-10px);}
    .paid-btn{background:none;color:#000;padding:3.2rem 4.5rem;border-radius:28px;font-weight:700;font-size:2.4rem;border:none;cursor:pointer;transition:transform .3s;}
    .paid-btn:hover{transform:translateY(-10px);opacity:0.9;}
    .wompi-pay-button{background:#10b981;color:white;padding:1.8rem;font-size:1.7rem;border:none;border-radius:16px;width:100%;font-weight:700;cursor:pointer;}
  </style>
</head>
<body>
  <div class="page">
    <header class="site-header" role="banner">
      <div class="wrap header-inner">
        <a class="logo" href="index.html">
          <svg class="logo-icon" viewBox="0 0 64 64"><path d="M4 56 L32 8 L60 56 Z" fill="currentColor"/></svg>
          <span class="brand">Propiedades Altura</span>
        </a>
        <nav class="header-nav">
          <div class="lang" id="lang-switch">
            <button class="lang-btn" data-lang="es" aria-pressed="true">ES</button>
            <button class="lang-btn" data-lang="en" aria-pressed="false">EN</button>
          </div>
          <a class="cta mobile-main-cta" href="index.html#properties">Ver Propiedades</a>
        </nav>
      </div>
      <p class="tagline" data-es="ORIENTE ANTIOQUEÑO" data-en="EASTERN ANTIOQUIA">ORIENTE ANTIOQUEÑO</p>
    </header>

    <main style="max-width:960px;margin:4rem auto 8rem;padding:0 1rem;text-align:center;">
      <h1>Vende tu propiedad</h1>
      <p style="font-size:1.4rem;color:#555;margin:2.5rem auto;max-width:720px;">
        Selecciona cómo quieres publicar tu propiedad
      </p>

      <div class="choose-buttons">
        <a href="exclusive-form.html" class="exclusive-btn">
          Representación<br>Exclusiva<br>
          <span style="font-size:1.4rem;">Comisión 3% al vender · Gratis</span>
        </a>

        <button id="paid-listing-trigger" type="button" class="paid-btn">
          Publicar Yo Mismo<br>
          <strong>$30.000 COP · 30 días</strong>
        </button>
      </div>
    </main>
  </div>

  <!-- HIDDEN FORM – ONLY AFTER PAYMENT -->
  <div id="form-container" style="display:none;max-width:960px;margin:0 auto 6rem;padding:0 1rem;">
    <h2 style="text-align:center;margin:4rem 0 3rem;">Completar Datos de la Propiedad</h2>

    <form name="sell" method="POST" data-netlify="true" enctype="multipart/form-data">

      <div class="full-width">
        <label>Tipo de Propiedad</label>
        <select name="tipo" required>
          <option value="Casa">Casa</option>
          <option value="Apartamento">Apartamento</option>
          <option value="Finca">Finca</option>
          <option value="Lote">Lote</option>
          <option value="Local">Local Comercial</option>
        </select>
      </div>

      <div class="full-width">
        <label>Ubicación (Google Maps URL)</label>
        <input type="url" name="map" required>
      </div>

      <div class="row">
        <div><label>Habitaciones</label><input type="number" name="rooms"></div>
        <div><label>Baños</label><input type="number" name="bathrooms"></div>
      </div>

      <div class="row">
        <div><label>Área Construida (m²)</label><input type="number" name="area"></div>
        <div><label>Área Lote (m²)</label><input type="number" name="lot_area"></div>
      </div>

      <div class="full-width">
        <label>Precio de Venta (COP)</label>
        <input type="number" name="price" required>
      </div>

      <div class="full-width">
        <label>¿Ofrece financiación del propietario?</label>
        <select name="owner_financing">
          <option value="No">No</option>
          <option value="Sí">Sí</option>
          <option value="Tal vez">Tal vez</option>
        </select>
      </div>

      <div class="full-width photo-upload">
        <label>Fotos (máx. 5)</label>
        <input type="file" id="photos" name="photos" accept="image/*" multiple style="display:none;">
        <p><strong>Clic o arrastra aquí</strong><br><small>Máximo 5 fotos</small></p>
        <div class="photo-preview" id="preview"></div>
      </div>

      <div class="full-width">
        <label>Mensaje adicional</label>
        <textarea name="message"></textarea>
      </div>

      <div class="full-width">
        <button type="submit">Enviar Información</button>
      </div>

    </form>
  </div>

  <!-- WOMPI MODAL -->
  <div id="wompi-modal" style="
    display:none;position:fixed;inset:0;
    background:rgba(0,0,0,0.88);z-index:9999;
    align-items:center;justify-content:center;
  ">
    <div style="
      background:white;padding:3rem;border-radius:24px;
      max-width:480px;width:90%;position:relative;
    ">
      <button type="button" id="close-wompi" style="
        position:absolute;top:12px;right:18px;
        font-size:3rem;background:none;border:none;
        cursor:pointer;line-height:1;
      ">&times;</button>

      <h2 style="text-align:center;margin-bottom:1rem;">
        Pagar $30.000 COP
      </h2>
      <p style="text-align:center;margin-bottom:2rem;">
        Publicación destacada · 30 días
      </p>

      <button class="wompi-pay-button"
        data-public-key="pub_prod_apuPhJcja0Q0kJ1S31uXry3M2zGz8ZC0"
        data-currency="COP"
        data-amount-in-cents="3000000"
        id="pay-button">
        Pagar con Wompi $30.000 COP
      </button>
    </div>
  </div>

  <script>
  // OPEN MODAL
  document.getElementById("paid-listing-trigger")
    .addEventListener("click", () => {
      document.getElementById("wompi-modal").style.display = "flex";
    });

  // CLOSE MODAL (X)
  document.getElementById("close-wompi")
    .addEventListener("click", () => {
      document.getElementById("wompi-modal").style.display = "none";
    });

  // CLOSE MODAL (ESC)
  document.addEventListener("keydown", e => {
    if (e.key === "Escape") {
      document.getElementById("wompi-modal").style.display = "none";
    }
  });

  // WOMPI SUCCESS EVENT → SHOW FORM
  window.addEventListener("wompi-success", () => {
    document.getElementById("wompi-modal").style.display = "none";
    document.getElementById("form-container").style.display = "block";
    document.getElementById("form-container")
      .scrollIntoView({ behavior: "smooth" });
  });

  // PHOTO PREVIEW
  const input = document.getElementById("photos");
  const preview = document.getElementById("preview");
  document.querySelector(".photo-upload").addEventListener("click", () => input.click());

  input.addEventListener("change", () => {
    preview.innerHTML = "";
    const files = [...input.files].slice(0, 5);
    files.forEach(file => {
      const reader = new FileReader();
      reader.onload = e => {
        const img = document.createElement("img");
        img.src = e.target.result;
        img.style.width = "140px";
        img.style.height = "140px";
        img.style.objectFit = "cover";
        img.style.borderRadius = "12px";
        img.style.margin = "0.3rem";
        preview.appendChild(img);
      };
      reader.readAsDataURL(file);
    });
  });
  </script>

</body>
</html>

