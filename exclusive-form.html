<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title data-es="Representación Exclusiva – Propiedades Altura"
         data-en="Exclusive Representation – Propiedades Altura">
    Representación Exclusiva – Propiedades Altura
  </title>

  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="sell.css">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

  <style>
    .gold { font-family:'Playfair Display',serif;font-weight:700;color:#FFD700;letter-spacing:1px; }
    .top-hero { background:#000;color:#FFD700;padding:4rem 3rem;border-radius:24px;text-align:center;margin:3rem auto 5rem;max-width:1000px;box-shadow:0 25px 60px rgba(0,0,0,0.6); }
    .top-hero h1 { font-size:3.4rem;margin:0; }
    .top-hero p { font-size:1.8rem;margin:1rem 0 0; }
    .contract-box { background:#000;color:#fff;padding:3.5rem 4rem;border-radius:24px;margin:0 auto 5rem;max-width:1000px;box-shadow:0 20px 50px rgba(0,0,0,0.5);line-height:1.8;font-size:1.18rem; }
    .contract-box h2 { color:#FFD700;font-size:2.8rem;margin:0 0 2rem;text-align:center; }
    .contract-box strong { color:#FFD700; }
    .accept-section { background:#fff8e1;padding:3.5rem;border-radius:24px;margin:5rem auto;max-width:900px;text-align:center;box-shadow:0 15px 40px rgba(0,0,0,0.1); }
    #form-section { display:none;margin-top:4rem; }
    #accept-checkbox { width:32px;height:32px;margin-right:18px;cursor:pointer; }
    .photo-upload { border:2px dashed rgba(0,0,0,0.08); padding:1.2rem; border-radius:12px; text-align:center; cursor:pointer; }
    .photo-upload p { margin:0 0 0.5rem; }
    .photo-preview { display:flex; gap:8px; flex-wrap:wrap; margin-top:0.75rem; }
    .photo-preview img { width:120px; height:80px; object-fit:cover; border-radius:8px; box-shadow:0 6px 18px rgba(0,0,0,0.08); }
    .map-pin { width:28px; height:28px; background:#c2410c; border-radius:50%; transform:translate(-50%,-100%); display:flex; align-items:center; justify-content:center; color:#fff; font-weight:700; }
    @media (max-width:640px){ .top-hero{padding:2rem} .top-hero h1{font-size:2rem} .top-hero p{font-size:1rem} }
  </style>
</head>

<body>
  <div class="page">

    <!-- HEADER -->
    <header class="site-header" role="banner">
      <div class="wrap header-inner">
        <a class="logo" href="index.html">
          <svg class="logo-icon" viewBox="0 0 64 64"><path d="M4 56 L32 8 L60 56 Z" fill="currentColor"/></svg>
          <span class="brand">Propiedades Altura</span>
        </a>

        <nav class="header-nav">
          <!-- LANGUAGE SWITCH -->
          <div class="lang" id="lang-switch">
            <button class="lang-btn" data-lang="es" aria-pressed="true">ES</button>
            <button class="lang-btn" data-lang="en" aria-pressed="false">EN</button>
          </div>

          <a class="cta mobile-main-cta" href="index.html#properties"
             data-es="Ver Propiedades"
             data-en="View Properties">Ver Propiedades</a>
        </nav>
      </div>

      <p class="tagline"
         data-es="ORIENTE ANTIOQUEÑO"
         data-en="EASTERN ANTIOQUIA">
         ORIENTE ANTIOQUEÑO
      </p>
    </header>

    <main style="max-width:960px;margin:4rem auto 8rem;padding:0 1rem;">

      <!-- HERO -->
      <div class="top-hero">
        <h1 class="gold"
            data-es="Representación Exclusiva"
            data-en="Exclusive Representation">
            Representación Exclusiva
        </h1>

        <p class="gold"
           data-es="Comisión del 3% sólo cuando se venda · Listado 100% gratuito · Contrato por 6 meses"
           data-en="3% commission only when sold · 100% free listing · 6-month agreement">
           Comisión del 3% sólo cuando se venda · Listado 100% gratuito · Contrato por 6 meses
        </p>
      </div>

      <!-- BENEFITS -->
      <div style="background:#000;color:#FFD700;padding:3.5rem;border-radius:24px;text-align:center;margin-bottom:5rem;">
        <h2 class="gold"
            style="font-size:2.8rem;margin-bottom:2rem;"
            data-es="Beneficios Incluidos"
            data-en="Included Benefits">
            Beneficios Incluidos
        </h2>

        <ul style="columns:2;column-gap:5rem;font-size:1.4rem;line-height:2;max-width:900px;margin:0 auto;text-align:left;">
          <li data-es="Publicación destacada y permanente" data-en="Featured, permanent listing">Publicación destacada y permanente</li>
          <li data-es="Fotos y video profesional (gratis)" data-en="Professional photos & video (free)">Fotos y video profesional (gratis)</li>
          <li data-es="Marketing nacional e internacional" data-en="National & international marketing">Marketing nacional e internacional</li>
          <li data-es="Asesoría de precios y estrategia" data-en="Pricing and strategy guidance">Asesoría de precios y estrategia</li>
          <li data-es="Filtrado de visitas serias" data-en="Screening of qualified buyers">Filtrado de visitas serias</li>
          <li data-es="Negociación y acompañamiento legal" data-en="Negotiation & legal support">Negociación y acompañamiento legal</li>
          <li data-es="Sólo pagas 3% al vender con éxito" data-en="You only pay 3% when sold successfully">Sólo pagas 3% al vender con éxito</li>
        </ul>
      </div>

      <!-- CONTRACT -->
      <div class="contract-box">
        <h2 class="gold"
            data-es="Contrato de Representación Exclusiva"
            data-en="Exclusive Representation Agreement">
            Contrato de Representación Exclusiva
        </h2>

        <p data-es="Por medio del presente contrato, el propietario autoriza en forma exclusiva a Propiedades Altura para la intermediación en la venta de su inmueble durante un período de 6 meses contados a partir de la aceptación electrónica."
           data-en="Through this agreement, the owner grants Propiedades Altura exclusive authorization to market and manage the sale of the property for a period of six (6) months, commencing from the date of electronic acceptance.">
          Por medio del presente contrato, el propietario autoriza en forma exclusiva a Propiedades Altura para la intermediación en la venta de su inmueble durante un período de 6 meses contados a partir de la aceptación electrónica.
        </p>

        <p data-es="La comisión pactada será del 3% + IVA sobre el valor final de venta, pagadera únicamente cuando la operación se concrete con éxito."
           data-en="The agreed commission is 3% plus VAT on the final sale price, payable only upon successful closing of the transaction.">
          La comisión pactada será del 3% + IVA sobre el valor final de venta, pagadera únicamente cuando la operación se concrete con éxito.
        </p>

        <p data-es="Propiedades Altura se compromete a:"
           data-en="Propiedades Altura agrees to:">
          Propiedades Altura se compromete a:
        </p>

        <ul>
          <li data-es="Realizar fotografía profesional, video y tour virtual 360° sin costo"
              data-en="Provide professional photography, video, and 360° virtual tour at no cost.">
            Realizar fotografía profesional, video y tour virtual 360° sin costo
          </li>
          <li data-es="Publicar el inmueble en los principales portales inmobiliarios"
              data-en="Publish the property on major real-estate portals and listing sites.">
            Publicar el inmueble en los principales portales inmobiliarios
          </li>
          <li data-es="Coordinar y filtrar todas las visitas"
              data-en="Coordinate and pre-screen all visits and showings.">
            Coordinar y filtrar todas las visitas
          </li>
          <li data-es="Asesorar en la fijación del precio de venta"
              data-en="Advise on competitive pricing and sale strategy.">
            Asesorar en la fijación del precio de venta
          </li>
          <li data-es="Llevar la negociación y preparar promesa y escritura"
              data-en="Lead negotiations and prepare promissory agreements and closing documents.">
            Llevar la negociación y preparar promesa y escritura
          </li>
          <li data-es="Acompañar hasta la firma de la escritura pública"
              data-en="Provide support through to the final signing of the public deed.">
            Acompañar hasta la firma de la escritura pública
          </li>
        </ul>

        <p data-es="El propietario se compromete a no contratar otros agentes ni vender directamente durante la vigencia del contrato."
           data-en="The owner agrees not to engage other agents or sell directly during the contract term.">
          El propietario se compromete a no contratar otros agentes ni vender directamente durante la vigencia del contrato.
        </p>

        <p data-es="En caso de venta por fuera del contrato dentro de los 6 meses siguientes con un comprador presentado por Propiedades Altura, se pagará igualmente la comisión del 3%."
           data-en="If the property is sold outside the contract within six (6) months to a buyer introduced by Propiedades Altura, the 3% commission will still be payable.">
          En caso de venta por fuera del contrato dentro de los 6 meses siguientes con un comprador presentado por Propiedades Altura, se pagará igualmente la comisión del 3%.
        </p>

        <p style="margin-top:2.5rem;font-size:1.3rem;"
           data-es="El presente contrato tiene plena validez legal una vez aceptado electrónicamente."
           data-en="This agreement becomes legally binding upon electronic acceptance.">
          El presente contrato tiene plena validez legal una vez aceptado electrónicamente.
        </p>
      </div>

      <!-- ACCEPTANCE -->
      <div class="accept-section">
        <label style="font-size:1.45rem;line-height:1.7;display:flex;align-items:center;justify-content:center;max-width:800px;margin:0 auto;cursor:pointer;">
          <input type="checkbox" id="accept-checkbox" required>
          <span class="gold"
                data-es="He leído y acepto plenamente el contrato de representación exclusiva por 6 meses con comisión del 3%."
                data-en="I have read and fully accept the 6-month exclusive representation agreement with a 3% commission.">
            He leído y acepto plenamente el contrato de representación exclusiva por 6 meses con comisión del 3%.
          </span>
        </label>

        <p style="margin:2.5rem 0 1rem;font-size:1.15rem;">
          <a href="/docs/exclusiva-propiedades-altura.pdf" target="_blank"
             data-es="Contrato en español (PDF)"
             data-en="Contract in Spanish (PDF)"
             style="color:#c2410c;">
             Contrato en español (PDF)
          </a> ·
          <a href="/docs/exclusive-listing-propiedades-altura.pdf" target="_blank"
             data-es="Contract in English (PDF)"
             data-en="Contract in English (PDF)"
             style="color:#c2410c;">
             Contract in English (PDF)
          </a>
        </p>
      </div>

      <!-- FORM -->
      <div id="form-section">
        <form class="form-grid" name="exclusive" method="POST" data-netlify="true" netlify-honeypot="bot-field" enctype="multipart/form-data">

          <input type="hidden" name="listing_type" value="exclusive">

          <div>
            <label data-es="Nombre completo *" data-en="Full name *">Nombre completo *</label>
            <input type="text" name="name" required
                   placeholder="John Doe"
                   data-placeholder-es="John Doe"
                   data-placeholder-en="John Doe">
          </div>

          <div>
            <label data-es="Email *" data-en="Email *">Email *</label>
            <input type="email" name="_replyto" required
                   placeholder="john@example.com"
                   data-placeholder-es="john@example.com"
                   data-placeholder-en="john@example.com">
          </div>

          <div>
            <label data-es="Teléfono / WhatsApp *" data-en="Phone / WhatsApp *">Teléfono / WhatsApp *</label>
            <input type="tel" name="phone" required
                   placeholder="+57 300 123 4567"
                   data-placeholder-es="+57 300 123 4567"
                   data-placeholder-en="+57 300 123 4567">
          </div>

          <div>
            <label data-es="Ciudad / Municipio" data-en="City / Municipality">Ciudad / Municipio</label>
            <input type="text" name="city"
                   placeholder="Guarne, Rionegro..."
                   data-placeholder-es="Guarne, Rionegro..."
                   data-placeholder-en="Guarne, Rionegro...">
          </div>

          <div class="full-width">
            <label id="mapLabel"
                   data-es="Haz clic en el mapa para seleccionar ubicación exacta"
                   data-en="Click on the map to select the exact location">
              Haz clic en el mapa para seleccionar ubicación exacta
            </label>

            <div id="map" style="height:420px;margin:1rem 0;border-radius:16px;"></div>

            <input type="hidden" name="latitude" id="lat">
            <input type="hidden" name="longitude" id="lng">
            <input type="hidden" name="google_maps_link" id="maps-link">
          </div>

          <div>
            <label data-es="Tipo de propiedad" data-en="Property type">Tipo de propiedad</label>
            <select name="property_type">
              <option data-es="Casa" data-en="House">Casa</option>
              <option data-es="Apartamento" data-en="Apartment">Apartamento</option>
              <option data-es="Finca" data-en="Farm">Finca</option>
              <option data-es="Lote" data-en="Lot">Lote</option>
              <option data-es="Local comercial" data-en="Commercial space">Local comercial</option>
              <option data-es="Bodega" data-en="Warehouse">Bodega</option>
            </select>
          </div>

          <div>
            <label data-es="Área construida (m²)" data-en="Built area (m²)">Área construida (m²)</label>
            <input type="number" name="area_m2" placeholder="250"
                   data-placeholder-es="250" data-placeholder-en="250">
          </div>

          <div>
            <label data-es="Área lote (m²)" data-en="Lot size (m²)">Área lote (m²)</label>
            <input type="number" name="lot_size" placeholder="1000"
                   data-placeholder-es="1000" data-placeholder-en="1000">
          </div>

          <div>
            <label data-es="Habitaciones" data-en="Bedrooms">Habitaciones</label>
            <input type="number" name="bedrooms" placeholder="3"
                   data-placeholder-es="3" data-placeholder-en="3">
          </div>

          <div>
            <label data-es="Baños" data-en="Bathrooms">Baños</label>
            <input type="number" name="bathrooms" placeholder="2"
                   data-placeholder-es="2" data-placeholder-en="2">
          </div>

          <div>
            <label data-es="Parqueaderos" data-en="Parking spaces">Parqueaderos</label>
            <input type="number" name="parking" placeholder="2"
                   data-placeholder-es="2" data-placeholder-en="2">
          </div>

          <div>
            <label data-es="Precio esperado de venta" data-en="Expected sale price">Precio esperado de venta</label>
            <input type="number" name="asking_price" placeholder="500000000"
                   data-placeholder-es="500000000" data-placeholder-en="500000000">
          </div>

          <!-- OWNER FINANCING -->
          <div class="full-width" style="margin:2rem 0;">
            <label style="font-size:1.35rem;display:flex;align-items:flex-start;cursor:pointer;">
              <input type="checkbox" name="open_to_financing" id="financing-checkbox" style="width:26px;height:26px;margin-right:16px;margin-top:6px;flex-shrink:0;">

              <span data-es="Estoy abierto a considerar financiación directa con el comprador"
                    data-en="I am open to considering direct financing with the buyer">
                Estoy abierto a considerar financiación directa con el comprador
              </span>

              <br>

              <small style="color:#16a34a;font-weight:600;"
                     data-es="(pago en cuotas – puede atraer más ofertas y mejor precio final)"
                     data-en="(installment payments – often brings more offers and a better final price)">
                (pago en cuotas – puede atraer más ofertas y mejor precio final)
              </small>
            </label>
          </div>

          <!-- PHOTOS -->
          <div class="full-width">
            <label data-es="Sube fotos de tu propiedad (máx. 10)" data-en="Upload photos of your property (max 10)">
              Sube fotos de tu propiedad (máx. 10)
            </label>

            <div class="photo-upload" id="photoDrop">
              <input type="file" name="photos" id="photos" accept="image/*" multiple style="display:none;">
              <p>
                <strong data-es="Clic o arrastra aquí" data-en="Click or drag here">Clic o arrastra aquí</strong><br>
                <small data-es="Máximo 10 fotos" data-en="Up to 10 photos">Máximo 10 fotos</small>
              </p>
              <div class="photo-preview" id="preview"></div>
            </div>
          </div>

          <!-- MESSAGE -->
          <div class="full-width">
            <label data-es="Mensaje adicional" data-en="Additional message">Mensaje adicional</label>
            <textarea name="message"
                      placeholder=""
                      data-placeholder-es=""
                      data-placeholder-en=""></textarea>
          </div>

          <!-- SUBMIT -->
          <div class="full-width">
            <button type="submit"
                    style="background:#000;color:#FFD700;padding:1.8rem;font-size:1.9rem;border:none;border-radius:20px;font-family:'Playfair Display',serif;"
                    data-es="Enviar Solicitud de Representación Exclusiva"
                    data-en="Submit Exclusive Representation Request">
              Enviar Solicitud de Representación Exclusiva
            </button>
          </div>

        </form>
      </div>
    </main>
  </div>

  <!-- LANGUAGE + INTERACTIONS SCRIPT -->
  <script>
    // Helper to apply language content
    function applyLanguage(lang) {
      document.documentElement.lang = lang;

      // Elements with text translations
      document.querySelectorAll('[data-es]').forEach(el => {
        const key = 'data-' + lang;
        const text = el.getAttribute(key);
        if (!text) return;

        // Inputs & textareas: set placeholder if data-placeholder exists
        if ((el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') && el.hasAttribute('data-placeholder-' + lang)) {
          const ph = el.getAttribute('data-placeholder-' + lang);
          el.placeholder = ph ?? '';
          return;
        }

        // Option elements: update visible option text
        if (el.tagName === 'OPTION') {
          el.textContent = text;
          return;
        }

        // If element has no children, safe to replace textContent
        if (el.children.length === 0) {
          el.textContent = text;
        } else {
          // For elements with children (e.g. labels that include <small> or <strong>),
          // update only their own text node if present, otherwise try to update innerText minimally.
          // Approach: if the element itself has a data attribute and also contains plain text only, set textContent.
          // To avoid removing nested tags, only update when element's child elements are all small/simple nodes with their own data attrs handled separately.
          // Fallback: replace the element's firstChild text node if it's a text node.
          const first = el.firstChild;
          if (first && first.nodeType === Node.TEXT_NODE) {
            first.nodeValue = text;
          } else {
            // last-resort: set textContent (this may remove nested tags) — but we only hit this rarely.
            el.textContent = text;
          }
        }
      });

      // Update placeholders for fields that have placeholder data attributes (for inputs lacking data-es attribute)
      document.querySelectorAll('input[data-placeholder-es], textarea[data-placeholder-es]').forEach(el => {
        const ph = el.getAttribute('data-placeholder-' + lang);
        if (ph !== null) el.placeholder = ph;
      });
    }

    // Initialize language buttons
    document.querySelectorAll(".lang-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        const lang = btn.dataset.lang;
        applyLanguage(lang);
        document.querySelectorAll(".lang-btn").forEach(b => b.setAttribute("aria-pressed", b.dataset.lang === lang));
      });
    });

    // Set initial language from html.lang or default 'es'
    (function(){
      const initial = document.documentElement.lang || 'es';
      applyLanguage(initial.startsWith('en') ? 'en' : 'es');
      document.querySelectorAll(".lang-btn").forEach(b => b.setAttribute("aria-pressed", b.dataset.lang === (initial.startsWith('en') ? 'en' : 'es')));
    })();

    // Accept checkbox toggles the form section
    document.getElementById('accept-checkbox').addEventListener('change', function () {
      const section = document.getElementById('form-section');
      section.style.display = this.checked ? 'block' : 'none';
      if (this.checked) section.scrollIntoView({behavior: 'smooth'});
    });

    // Photo upload drag & click + preview (max 10)
    (function(){
      const photosInput = document.getElementById('photos');
      const drop = document.getElementById('photoDrop');
      const preview = document.getElementById('preview');
      const MAX = 10;

      function updatePreview(files){
        preview.innerHTML = '';
        Array.from(files).slice(0,MAX).forEach(file => {
          if (!file.type.startsWith('image/')) return;
          const img = document.createElement('img');
          img.alt = file.name;
          const reader = new FileReader();
          reader.onload = e => img.src = e.target.result;
          reader.readAsDataURL(file);
          preview.appendChild(img);
        });
      }

      drop.addEventListener('click', () => photosInput.click());

      drop.addEventListener('dragover', (e) => { e.preventDefault(); drop.style.opacity = 0.9; });
      drop.addEventListener('dragleave', (e) => { e.preventDefault(); drop.style.opacity = 1; });
      drop.addEventListener('drop', (e) => {
        e.preventDefault();
        drop.style.opacity = 1;
        const dt = e.dataTransfer;
        if (dt && dt.files && dt.files.length) {
          // Merge with current files if any (not trivial to truly append to input.files in all browsers).
          // We'll show preview for dropped files and set input.files where possible.
          const files = dt.files;
          photosInput.files = files; // note: may not be allowed in some browsers; still useful for modern ones
          updatePreview(files);
        }
      });

      photosInput.addEventListener('change', (e) => {
        updatePreview(e.target.files);
      });
    })();

    // Simple Google Map init: show map, allow click to set lat/lng and google maps link
    function initSellMap() {
      try {
        const latInput = document.getElementById('lat');
        const lngInput = document.getElementById('lng');
        const linkInput = document.getElementById('maps-link');
        const mapEl = document.getElementById('map');

        // Default center (Antioquia approximate)
        const defaultCenter = { lat: 6.200000, lng: -75.565000 };

        // Create map
        const map = new google.maps.Map(mapEl, {
          center: defaultCenter,
          zoom: 10,
          mapTypeControl: false,
          streetViewControl: false,
        });

        // Marker for click
        let marker = new google.maps.Marker({
          map: map,
          draggable: false,
        });

        // If browser geolocation available, attempt set center
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(pos => {
            const p = { lat: pos.coords.latitude, lng: pos.coords.longitude };
            map.setCenter(p);
            map.setZoom(12);
          }, ()=>{/* ignore errors */});
        }

        // Click handler to set lat/lng
        map.addListener('click', (e) => {
          const pos = e.latLng;
          marker.setPosition(pos);
          map.panTo(pos);
          const lat = pos.lat().toFixed(6);
          const lng = pos.lng().toFixed(6);
          latInput.value = lat;
          lngInput.value = lng;
          // Google Maps link (open in new tab)
          linkInput.value = `https://www.google.com/maps/search/?api=1&query=${lat},${lng}`;
        });

        // If hidden inputs already have values, restore marker
        if (latInput.value && lngInput.value) {
          const p = { lat: parseFloat(latInput.value), lng: parseFloat(lngInput.value) };
          marker.setPosition(p);
          map.setCenter(p);
          map.setZoom(15);
        }
      } catch (err) {
        // If google maps script not loaded or other error, gracefully degrade
        console.error('initSellMap error:', err);
        // Provide a small fallback message
        const mapEl = document.getElementById('map');
        if (mapEl) mapEl.innerHTML = '<p style="padding:1rem;">Mapa no disponible — por favor introduzca la ubicación manualmente.</p>';
      }
    }

    // Expose initSellMap as global for Google Maps callback
    window.initSellMap = initSellMap;
  </script>

  <!-- GOOGLE MAPS -->
  <script async defer
          src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCoIGK7pUUxiu0nJSJ79ckIcayGm5O31Zo&callback=initSellMap">
  </script>
</body>
</html>
